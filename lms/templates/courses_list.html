<%page expression_filter="h"/>
<%namespace name='static' file='static_content.html'/>
<%! from django.utils.translation import ugettext as _ %>

<section class="courses-container">
  <section class="highlighted-courses">

    % if settings.FEATURES.get('COURSES_ARE_BROWSABLE'):
      <section class="courses course-page-section">
        <h2 class="h2">Курсы, которые скоро начнутся</h2>
        <ul class="courses-listing">
          <% course_max = settings.HOMEPAGE_COURSE_MAX %>
          ## limiting the course number by using HOMEPAGE_COURSE_MAX as the maximum number of courses
          %for course in courses[:course_max]:
          <li class="courses-listing-item">
              <%include file="course.html" args="course=course" />
          </li>
          %endfor
        </ul>
        ## in case there are courses that are not shown on the homepage, a 'View all Courses' link should appear
        % if course_max and len([c for c in courses if not c.has_ended()]) > course_max:
        <div class="courses-more">
          <a class="courses-more-cta" href="${marketing_link('COURSES')}"> ${_("View all Courses")} </a>
        </div>
        % endif
      </section>

    %if partners:
    <section class="course-partners course-page-section">
        <h2 class="h2">Наши партнеры</h2>
        <ul class="course-partners-list">
          %for partner in partners:
          <li class="course-partners-list__item">
            <a href="${partner.url}" target="_blank">
              <img class="course-partners-list__image" src="${partner.image.url}" alt="${partner.name}">
            </a>
          </li>
          %endfor
        </ul>
      </section>
    % endif

    % endif
  </section>
</section>
