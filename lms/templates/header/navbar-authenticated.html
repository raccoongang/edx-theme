## mako

<%page expression_filter="h" args="online_help_token"/>

<%namespace name='static' file='../static_content.html'/>
<%namespace file='../main.html' import="login_query"/>
<%!
from django.urls import reverse
from django.utils.translation import ugettext as _
from openedx.core.djangoapps.site_configuration import helpers as configuration_helpers
from openedx.features.enterprise_support.utils import get_enterprise_learner_generic_name
%>

<%
  show_explore_courses = settings.FEATURES.get('COURSES_ARE_BROWSABLE') and not show_program_listing
  show_sysadmin_dashboard = settings.FEATURES.get('ENABLE_SYSADMIN_DASHBOARD','') and user.is_staff
  self.real_user = getattr(user, 'real_user', user)
  username = self.real_user.username
  displayname = get_enterprise_learner_generic_name(request) or username

  support_link = configuration_helpers.get_value('SUPPORT_SITE_LINK', settings.SUPPORT_SITE_LINK)
  doc_link = get_online_help_info(online_help_token)['doc_url']

  if online_help_token == "instructor":
    help_link = doc_link
  elif support_link:
    help_link = support_link
  else:
    help_link = doc_link
%>

<div class="nav-links">
  <div class="secondary">
    <div class="mobile-nav-item hidden-mobile nav-item">
      <a href="${reverse('dashboard')}" role="menuitem">${_("Dashboard")}</a>
    </div>
    % if should_display_shopping_cart_func() and not (course and static.is_request_in_themed_site()): # see shoppingcart.context_processor.user_has_cart_context_processor
      <div class="mobile-nav-item hidden-mobile nav-item">
        <a class="shopping-cart" href="${reverse('shoppingcart.views.show_cart')}">
          <span class="icon fa fa-shopping-cart" aria-hidden="true"></span> ${_("Shopping Cart")}
        </a>
      </div>
    % endif
    <div class="nav-item nav-item_user mobile-nav-item">
        <span>${_("Welcome,")}</span>
        <span class="sr-only">${_("Dashboard for:")}</span>
        <span class="username">${displayname}.</span>
    </div>
    <div class="nav-item">
      <button class="site-menu-toggle js-header-menu">
        <span class="toggle-bar"></span>
        <span class="toggle-bar"></span>
        <span class="toggle-bar"></span>
      </button>
      <ul class="slide-menu">
        <li><a href="${reverse('dashboard')}">${_("Dashboard")}</a></li>
        <li><a href="${reverse('learner_profile', kwargs={'username': username})}">${_("Profile")}</a></li>
        <li><a href="${reverse('account_settings')}">${_("Account")}</a></li>
        <li><a href="/help">${_("Help Center")}</a></li>
        <li><a href="/contact">${_("Contact Us")}</a></li>
        <li><a href="${reverse('logout')}">${_("Sign Out")}</a></li>
      </ul>
    </div>
  </div>
</div>
